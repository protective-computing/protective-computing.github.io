<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Offline-first Health Architecture — Protective Computing</title>
  <meta name="description" content="A protective, offline-first architecture for health and medical apps: local authority, exposure minimization, reversible operations, and safe sync." />
  <link rel="canonical" href="https://protective-computing.github.io/docs/offline-first-health-architecture.html" />

  <meta property="og:site_name" content="Protective Computing" />
  <meta property="og:title" content="Offline-first Health Architecture" />
  <meta property="og:description" content="How to build health apps that remain safe and useful with no network, high stress, and sensitive data." />
  <meta property="og:url" content="https://protective-computing.github.io/docs/offline-first-health-architecture.html" />
  <meta property="og:type" content="article" />
  <meta property="og:image" content="https://protective-computing.github.io/assets/og/protective-computing.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Offline-first Health Architecture" />
  <meta name="twitter:description" content="How to build health apps that remain safe and useful with no network, high stress, and sensitive data." />
  <meta name="twitter:image" content="https://protective-computing.github.io/assets/og/protective-computing.png" />

  <style>
    :root{
      --bg: #070A10;
      --panel: rgba(255,255,255,0.06);
      --panel2: rgba(255,255,255,0.04);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.68);
      --faint: rgba(255,255,255,0.52);
      --line: rgba(255,255,255,0.10);
      --brand: #34d3ff;
      --brand2:#7c5cff;
      --shadow: 0 18px 55px rgba(0,0,0,.55);
      --radius: 18px;
    }
    *{ box-sizing: border-box; }
    html, body{ height: 100%; }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(124,92,255,.18), transparent 60%),
                  radial-gradient(1100px 650px at 90% 15%, rgba(52,211,255,.14), transparent 55%),
                  radial-gradient(900px 500px at 50% 90%, rgba(52,211,255,.10), transparent 60%),
                  var(--bg);
      color: var(--text);
      letter-spacing: -0.015em;
    }
    a{ color: inherit; text-decoration: none; }
    a:hover{ text-decoration: underline; text-underline-offset: 3px; }
    :focus-visible{ outline: 2px solid rgba(52,211,255,0.55); outline-offset: 2px; }

    .wrap{ max-width: 980px; margin: 0 auto; padding: 28px 22px 80px; }
    .back{
      display:inline-block;
      padding: 9px 12px;
      border: 1px solid var(--line);
      border-radius: 999px;
      background: rgba(255,255,255,0.03);
      color: var(--muted);
      font-size: 13px;
      margin-bottom: 18px;
    }
    .back:hover{ background: rgba(255,255,255,0.06); text-decoration:none; color: var(--text); }

    .card{ border:1px solid var(--line); background: var(--panel); border-radius: 22px; padding: 22px; box-shadow: var(--shadow); }
    h1{ margin: 0 0 10px; font-size: clamp(28px, 3.6vw, 44px); letter-spacing: -0.04em; }
    .subtitle{ margin:0 0 18px; color: var(--muted); line-height: 1.7; max-width: 75ch; }

    h2{ margin: 22px 0 10px; font-size: 14px; letter-spacing: 0.08em; text-transform: uppercase; color: var(--faint); }
    p, li{ color: var(--muted); line-height: 1.8; font-size: 15px; }
    ul{ margin: 10px 0 0; padding-left: 18px; }
    code{ background: rgba(0,0,0,0.28); border: 1px solid var(--line); padding: 2px 6px; border-radius: 8px; font-size: 12px; color: var(--text); }

    .callout{ margin-top: 14px; padding: 12px 14px; border:1px solid var(--line); border-radius: 14px; background: rgba(255,255,255,0.03); }
    .callout strong{ color: var(--text); }
    .links{ margin-top: 18px; border-top: 1px solid var(--line); padding-top: 14px; }
    .links a{ color: var(--text); }
  </style>

  <!-- Privacy-friendly analytics by Plausible -->
  <script async src="https://plausible.io/js/pa-_ThpRaAClu8dKUNrYHpiL.js"></script>
  <script>
    globalThis.plausible = globalThis.plausible || function () {
      globalThis.plausible.q = globalThis.plausible.q || [];
      globalThis.plausible.q.push(arguments);
    };
    globalThis.plausible.init = globalThis.plausible.init || function (options) {
      globalThis.plausible.o = options || {};
    };
    globalThis.plausible.init();
  </script>
</head>
<body>
  <div class="wrap">
    <a class="back" href="../">← Home</a>

    <article class="card">
      <h1>Offline-first Health Architecture</h1>
      <p class="subtitle">
        Health and medical-adjacent apps have the worst possible combination of requirements: highly sensitive data, high-stress use,
        and real harm when systems fail. Offline-first is necessary — but not sufficient. Protective Computing adds the constraints
        that make offline-first safe.
      </p>

      <h2>The goal</h2>
      <p>
        Build a system that remains useful when the network disappears and remains safe when the context becomes adversarial.
        That means two explicit properties:
      </p>
      <ul>
        <li><strong>Local Authority</strong>: the user can complete essential tasks locally with predictable behavior.</li>
        <li><strong>Exposure Minimization</strong>: the system limits what it collects, stores, and reveals by default.</li>
      </ul>

      <h2>Reference architecture (minimal, protective)</h2>
      <p>
        A protective offline-first health app typically has these layers:
      </p>
      <ul>
        <li><strong>Local store</strong> (encrypted-at-rest where possible) holding the working set.</li>
        <li><strong>Operation log</strong> of user-intent actions (not raw UI events) to support sync and reversibility.</li>
        <li><strong>Sync engine</strong> that uploads only what’s necessary, when safe, and handles conflicts deterministically.</li>
        <li><strong>Remote store</strong> treated as a replica, not the authority (the app must still function without it).</li>
      </ul>

      <div class="callout">
        <strong>Design principle:</strong> treat “server down” and “user offline” as normal. If your essential workflow requires a
        network round-trip, you built an online app with caching.
      </div>

      <h2>Protective requirements you can enforce</h2>
      <p>
        Offline-first gets you availability; Protective Computing gets you controlled failure.
        These are the high-leverage constraints:
      </p>
      <ul>
        <li><a href="principles/reversibility.html">Reversibility</a>: destructive actions must be undoable with explicit recovery windows.</li>
        <li><a href="principles/exposure-minimization.html">Exposure Minimization</a>: avoid analytics by default; keep a minimal schema; prefer local computation.</li>
        <li><a href="principles/local-authority.html">Local Authority</a>: ensure essential tasks are possible without an account, without support, without the cloud.</li>
        <li><a href="principles/degraded-functionality.html">Degraded Functionality</a>: define safe behavior when battery/CPU/storage are scarce.</li>
        <li><a href="principles/coercion-resistance.html">Coercion Resistance</a>: consider device seizure and forced unlock; make “safe failure” explicit.</li>
      </ul>

      <h2>Sync: the failure modes that matter</h2>
      <p>
        Sync is where offline-first systems leak data or destroy user trust. A protective sync design should explicitly address:
      </p>
      <ul>
        <li><strong>Conflict resolution</strong>: deterministic, auditable merges; no silent overwrites.</li>
        <li><strong>Partial uploads</strong>: never require uploading the entire dataset to complete a local action.</li>
        <li><strong>Retry storms</strong>: exponential backoff; avoid battery and bandwidth exhaustion.</li>
        <li><strong>Coercive contexts</strong>: avoid creating a “single place” an attacker can demand to export everything.</li>
      </ul>

      <h2>Example: PainTracker mapping</h2>
      <p>
        The reference implementation mapping shows how protective requirements translate into concrete design decisions for a small,
        local-first health tracker.
      </p>
      <ul>
        <li><a href="reference-implementation/paintracker-mapping.html">PainTracker reference-implementation mapping</a></li>
      </ul>

      <h2>References</h2>
      <ul>
        <li><a href="https://doi.org/10.5281/zenodo.18688516">Protective Computing Canon (Zenodo DOI)</a></li>
        <li><a href="https://doi.org/10.5281/zenodo.18782339">Field Guide v0.1 (Zenodo DOI)</a></li>
        <li><a href="https://www.inkandswitch.com/local-first/">Local-first Software (Ink & Switch)</a></li>
      </ul>

      <div class="links">
        <p style="margin:0;color:var(--faint);font-size:13px;">
          Next: <a href="stability-assumption.html">Stability Assumption</a> ·
          <a href="trauma-informed-software-patterns.html">Trauma-informed software patterns</a>
        </p>
      </div>
    </article>
  </div>
</body>
</html>
