<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PainTracker — Protective Computing Compliance Mapping</title>
    <meta name="description" content="Reference implementation: honest assessment of PainTracker compliance against Protective Computing Specification v1.0.">
    <link rel="icon" href="/assets/logo.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.7;
            color: #e0e0e0;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1a3e 50%, #0f1628 100%);
            min-height: 100vh;
        }
        header {
            background: rgba(0, 0, 0, 0.5);
            border-bottom: 2px solid rgba(0, 255, 200, 0.3);
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        nav {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(135deg, #00ffc8 0%, #7c3aed 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
        }
        nav a {
            color: #00ffc8;
            text-decoration: none;
            margin-left: 2rem;
            font-size: 14px;
            transition: color 0.3s;
        }
        nav a:hover {
            color: #7c3aed;
        }
        main {
            max-width: 1000px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }
        h1 {
            font-size: 2.6rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #00ffc8 0%, #7c3aed 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            border-bottom: 2px solid rgba(0, 255, 200, 0.2);
            padding-bottom: 1rem;
        }
        .subtitle {
            color: #aaa;
            font-size: 16px;
            margin-bottom: 0.5rem;
        }
        .breadcrumb {
            font-size: 13px;
            color: #666;
            margin-bottom: 2rem;
        }
        .breadcrumb a {
            color: #00ffc8;
            text-decoration: none;
        }
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        h2 {
            font-size: 1.8rem;
            margin-top: 3rem;
            margin-bottom: 1.5rem;
            color: #00ffc8;
            border-left: 4px solid #7c3aed;
            padding-left: 1rem;
        }
        h3 {
            font-size: 1.2rem;
            margin-top: 1.8rem;
            margin-bottom: 1rem;
            color: #7c3aed;
        }
        h4 {
            font-size: 1rem;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
            color: #00ffc8;
            font-weight: 600;
        }
        p {
            margin-bottom: 1.2rem;
            color: #c0c0c0;
        }
        .box {
            border-left: 4px solid;
            padding: 1.5rem;
            margin: 2rem 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }
        .box.compliance {
            border-left-color: #00ffc8;
            background: rgba(0, 255, 200, 0.08);
        }
        .box.gap {
            border-left-color: #ff6b6b;
            background: rgba(255, 107, 107, 0.08);
        }
        .box.strength {
            border-left-color: #34d3ff;
            background: rgba(52, 211, 255, 0.08);
        }
        .box.warning {
            border-left-color: #ffc800;
            background: rgba(255, 200, 0, 0.08);
        }
        .box-title {
            font-weight: bold;
            color: #00ffc8;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
        .level-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 12px;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .level-1 {
            background: rgba(124, 58, 237, 0.2);
            color: #7c3aed;
            border: 1px solid rgba(124, 58, 237, 0.3);
        }
        .level-2 {
            background: rgba(52, 211, 255, 0.2);
            color: #34d3ff;
            border: 1px solid rgba(52, 211, 255, 0.3);
        }
        .level-3 {
            background: rgba(0, 255, 200, 0.2);
            color: #00ffc8;
            border: 1px solid rgba(0, 255, 200, 0.3);
        }
        .level-partial {
            background: rgba(255, 200, 0, 0.2);
            color: #ffc800;
            border: 1px solid rgba(255, 200, 0, 0.3);
        }
        .matrix {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        .matrix-item {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 200, 0.2);
            padding: 1.2rem;
            border-radius: 4px;
        }
        .matrix-title {
            color: #00ffc8;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        .matrix-level {
            color: #aaa;
            font-size: 14px;
            line-height: 1.5;
        }
        ul, ol {
            margin: 1rem 0 1.5rem 2rem;
            color: #c0c0c0;
        }
        li {
            margin-bottom: 0.8rem;
            line-height: 1.6;
        }
        .checkpoint {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(0, 255, 200, 0.15);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 3px;
            border-left: 3px solid #00ffc8;
        }
        .checkpoint-title {
            color: #00ffc8;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        .checkpoint p {
            margin-bottom: 0.5rem;
        }
        .checkpoint p:last-child {
            margin-bottom: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(0, 255, 200, 0.2);
            border-radius: 4px;
            overflow: hidden;
        }
        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(0, 255, 200, 0.1);
            color: #c0c0c0;
        }
        th {
            background: rgba(124, 58, 237, 0.15);
            color: #00ffc8;
            font-weight: bold;
        }
        tr:last-child td {
            border-bottom: none;
        }
        code {
            background: rgba(0, 0, 0, 0.4);
            padding: 3px 8px;
            border-radius: 3px;
            font-family: "Courier New", monospace;
            color: #00ffc8;
            font-size: 14px;
        }
        .requirement {
            background: rgba(0, 0, 0, 0.2);
            padding: 1rem;
            margin: 1rem 0;
            border-left: 3px solid #7c3aed;
            border-radius: 3px;
        }
        .requirement-title {
            color: #7c3aed;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        .requirement p {
            margin-bottom: 0.5rem;
            color: #c0c0c0;
        }
        .requirement p:last-child {
            margin-bottom: 0;
        }
        .pass {
            color: #34d3ff;
        }
        .fail {
            color: #ff6b6b;
        }
        .partial {
            color: #ffc800;
        }
        footer {
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(0, 255, 200, 0.1);
            text-align: center;
            font-size: 13px;
            color: #666;
        }
        footer a {
            color: #00ffc8;
            text-decoration: none;
        }
        footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="/" class="logo">◊ Protective Computing</a>
            <div>
                <a href="/docs/spec/v1.0.html">Specification v1.0</a>
                <a href="https://zenodo.org/communities/protective-computing/" target="_blank">Zenodo</a>
                <a href="https://github.com/protective-computing/protective-computing.github.io" target="_blank">GitHub</a>
            </div>
        </nav>
    </header>

    <main>
        <div class="breadcrumb">
            <a href="/">Home</a> / <a href="/docs/spec/v1.0.html">Specification</a> / <strong>Reference Implementation: PainTracker</strong>
        </div>

        <h1>PainTracker — Protective Computing Compliance Mapping</h1>
        <p class="subtitle">Honest assessment of PainTracker compliance against Protective Computing Specification v1.0</p>
        <p class="subtitle" style="color: #888; font-size: 14px; margin-top: 1rem;">This is a reference implementation document. It demonstrates how to audit a real system against the specification and how to transparently report partial compliance.</p>

        <!-- EXECUTIVE SUMMARY -->
        <h2>Executive Summary</h2>

        <p><strong>PainTracker</strong> is a health journaling application designed for chronic pain patients to track symptoms, treatments, and environmental triggers. It operates on patient devices (mobile, web, desktop) and optionally syncs to a server.</p>

        <div class="box compliance">
            <div class="box-title">Compliance Profile</div>
            <table>
                <tr>
                    <th>Principle</th>
                    <th>Compliance Level</th>
                    <th>Status</th>
                </tr>
                <tr>
                    <td><strong>Reversibility</strong></td>
                    <td><span class="level-badge level-2">Level 2</span></td>
                    <td><span class="pass">✓ Meets</span></td>
                </tr>
                <tr>
                    <td><strong>Exposure Minimization</strong></td>
                    <td><span class="level-badge level-3">Level 3</span></td>
                    <td><span class="pass">✓ Meets</span></td>
                </tr>
                <tr>
                    <td><strong>Local Authority</strong></td>
                    <td><span class="level-badge level-3">Level 3</span></td>
                    <td><span class="pass">✓ Meets</span></td>
                </tr>
                <tr>
                    <td><strong>Coercion Resistance</strong></td>
                    <td><span class="level-badge level-partial">Level 2.5</span></td>
                    <td><span class="partial">~ Partial</span></td>
                </tr>
                <tr>
                    <td><strong>Degraded Functionality</strong></td>
                    <td><span class="level-badge level-2">Level 2</span></td>
                    <td><span class="partial">~ Partial</span></td>
                </tr>
                <tr>
                    <td><strong>Essential Utility</strong></td>
                    <td><span class="level-badge level-3">Level 3</span></td>
                    <td><span class="pass">✓ Meets</span></td>
                </tr>
            </table>

            <p style="margin-top: 1.5rem; color: #aaa; font-size: 14px;"><strong>Overall Claim:</strong> PainTracker achieves <strong>Level 2–3 Protective Computing v1.0</strong> compliance with identified gaps in Coercion Resistance and Degraded Functionality. Suitable for production health journaling; not suitable for users under active state surveillance without additional hardening.</p>
        </div>

        <!-- DETAILED PRINCIPLE ANALYSIS -->
        <h2>Detailed Principle Compliance</h2>

        <!-- REVERSIBILITY -->
        <h3>1. Reversibility <span class="level-badge level-2">Level 2</span> <span class="pass">✓ MEETS</span></h3>

        <div class="box strength">
            <div class="box-title">Compliance Evidence</div>
            <h4>What PainTracker Does</h4>
            <ul>
                <li>All user edits (entry deletion, tag modification, treatment notes) are reversible via 30-day trash folder</li>
                <li>Local undo/redo stack (Ctrl+Z/Ctrl+Y) for all destructive operations</li>
                <li>Complete entry history: users can view and restore prior versions of journal entries</li>
                <li>Server maintains soft-deleted entries for 30 days; users see "Item will be permanently deleted in X days"</li>
            </ul>

            <h4>Specification Requirement</h4>
            <p><strong>Level 2:</strong> Undo/redo stack; user can reverse actions within session.</p>

            <h4>Assessment</h4>
            <p><span class="pass">✓ MEETS Level 2</span> — Local undo/redo stack present. <span class="partial">Exceeds with 30-day recovery window</span> (Level 2+ feature, approaching Level 3).</p>

            <h4>How to Verify</h4>
            <div class="checkpoint">
                <div class="checkpoint-title">Audit Checkpoint: Reversibility</div>
                <p><strong>Test 1:</strong> Delete an entry. Use Ctrl+Z. Entry recovers. ✓</p>
                <p><strong>Test 2:</strong> Delete an entry. Search trash folder. Entry appears with "30 days remaining" timestamp. ✓</p>
                <p><strong>Test 3:</strong> Wait 31 days. Entry is permanently deleted. ✓</p>
            </div>
        </div>

        <!-- EXPOSURE MINIMIZATION -->
        <h3>2. Exposure Minimization <span class="level-badge level-3">Level 3</span> <span class="pass">✓ MEETS</span></h3>

        <div class="box strength">
            <div class="box-title">Compliance Evidence</div>
            <h4>What PainTracker Does</h4>
            <ul>
                <li><strong>Data Minimization:</strong> Collects only essential fields: entry date, pain level (0–10), location, treatment, notes. No external tracking, no analytics beyond user request.</li>
                <li><strong>Encryption at Rest:</strong> AES-256 GCM for all stored entries. Local database encrypted using device OS native encryption (iOS Keychain, Android Keystore).</li>
                <li><strong>Encryption in Transit:</strong> TLS 1.3 for all server communication. Mutual TLS for authenticated endpoints.</li>
                <li><strong>Zero-Knowledge Sync:</strong> If users enable optional cloud backup, entries are encrypted before transmission with user-held key (user passphrase derives encryption key via Argon2id). Server stores only ciphertext; PainTracker system cannot decrypt.</li>
                <li><strong>Retention Policy:</strong> Local entries kept indefinitely (user control). Server backups auto-delete after 1 year unless user extends; users can manually delete anytime.</li>
                <li><strong>No Data Sharing:</strong> Zero third-party access. No ads, no analytics trackers, no data sale.</li>
            </ul>

            <h4>Specification Requirement</h4>
            <p><strong>Level 3:</strong> Level 2 + zero-knowledge for sensitive data; user holds encryption keys; regular key rotation.</p>

            <h4>Assessment</h4>
            <p><span class="pass">✓ MEETS Level 3</span> — Zero-knowledge backup architecture; user-held keys; AES-256 encryption.</p>

            <h4>How to Verify</h4>
            <div class="checkpoint">
                <div class="checkpoint-title">Audit Checkpoint: Exposure Minimization</div>
                <p><strong>Test 1:</strong> Export local database. Attempt to read without decryption key. File is unreadable binary. ✓</p>
                <p><strong>Test 2:</strong> Intercept server backup traffic (via proxy). Captured payload is ciphertext. Even if server is breached, plaintext is inaccessible. ✓</p>
                <p><strong>Test 3:</strong> Server admin attempts to query backup. Returns only encrypted blobs; no plaintext access even with admin credentials. ✓</p>
                <p><strong>Test 4:</strong> Verify TLS 1.3 via <code>openssl s_client</code>. Confirm no weak ciphersuites or downgrade attacks possible. ✓</p>
            </div>
        </div>

        <!-- LOCAL AUTHORITY -->
        <h3>3. Local Authority <span class="level-badge level-3">Level 3</span> <span class="pass">✓ MEETS</span></h3>

        <div class="box strength">
            <div class="box-title">Compliance Evidence</div>
            <h4>What PainTracker Does</h4>
            <ul>
                <li><strong>Offline-First:</strong> All core functionality works completely offline. Users create, edit, delete entries without internet. App is fully functional on airplane mode.</li>
                <li><strong>Local Data Retention:</strong> Complete copy of user's journal lives on their device. No requirement to contact server for any core operation.</li>
                <li><strong>Graceful Sync:</strong> Changes queue locally. When connectivity returns, sync happens asynchronously without blocking user workflow. Conflicts resolved via last-write-wins with timestamp.</li>
                <li><strong>Multi-Device Sync:</strong> CRDT-style vector clocks allow conflict-free replication across user's devices (phone, tablet, laptop). Users can provision new devices without server approval.</li>
                <li><strong>Optional Server:</strong> Cloud backup is optional. Users can delete account; local data remains. Even without server, all features work.</li>
            </ul>

            <h4>Specification Requirement</h4>
            <p><strong>Level 3:</strong> Multi-device sync with automatic conflict resolution (CRDT or operational transforms).</p>

            <h4>Assessment</h4>
            <p><span class="pass">✓ MEETS Level 3</span> — Full offline operation, CRDT-style conflict resolution, server is optional.</p>

            <h4>How to Verify</h4>
            <div class="checkpoint">
                <div class="checkpoint-title">Audit Checkpoint: Local Authority</div>
                <p><strong>Test 1:</strong> Disable network. Create new entry. Entry saves locally. ✓</p>
                <p><strong>Test 2:</strong> Edit entry on phone offline. Enable network. Edit same entry on laptop offline with different content. Enable network on laptop. Sync both devices. Conflict resolved without user intervention. ✓</p>
                <p><strong>Test 3:</strong> Delete server account. Local data persists. App continues to function. ✓</p>
            </div>
        </div>

        <!-- COERCION RESISTANCE -->
        <h3>4. Coercion Resistance <span class="level-badge level-partial">Level 2.5</span> <span class="partial">~ PARTIAL</span></h3>

        <div class="box warning">
            <div class="box-title">Compliance Evidence & Gaps</div>
            <h4>What PainTracker Does (Level 2 ✓)</h4>
            <ul>
                <li><strong>Strong Encryption:</strong> AES-256 GCM; user-held keys (passphrase-derived).</li>
                <li><strong>Passphrase-Based:</strong> User derives key from passphrase via Argon2id (128-bit work, 2GB memory). Slow enough to resist brute-force.</li>
                <li><strong>No Master Keys:</strong> No administrator backdoor. PainTracker team cannot decrypt user entries even with database access.</li>
            </ul>

            <h4>What PainTracker Does NOT (Gaps)</h4>
            <ul>
                <li><span class="fail">✗ NO Plausible Deniability:</span> No hidden volumes or decoy accounts. If coercer demands "show me your entries," user cannot deny they exist if device is unlocked.</li>
                <li><span class="fail">✗ NO Dead Man's Switch:</span> If user is detained for 72 hours, data is not automatically destroyed.</li>
                <li><span class="fail">✗ Metadata Leakage:</span> Server logs connection timestamps, entry creation/modification times, sync activity. Metadata reveals usage patterns even if entry content is encrypted.</li>
            </ul>

            <h4>Specification Requirement</h4>
            <p><strong>Level 3:</strong> Level 2 + plausible deniability features (decoy accounts, hidden containers).</p>
            <p><strong>Level 4:</strong> Level 3 + threshold key splitting (Shamir's Secret Sharing).</p>

            <h4>Assessment</h4>
            <p><span class="partial">PARTIAL — Meets Level 2, approaches Level 3 on encryption, but lacks deniability features.</span></p>

            <p><strong>Honest Assessment:</strong> PainTracker is suitable for users defending against passive surveillance (metadata collection, data breaches). It is NOT suitable for users under active coercion (state interrogation, torture, forced disclosure scenarios). The spec requires Level 3 deniability for those contexts; PainTracker doesn't provide it yet.</p>

            <h4>How to Verify</h4>
            <div class="checkpoint">
                <div class="checkpoint-title">Audit Checkpoint: Coercion Resistance</div>
                <p><strong>Test 1 (Encryption):</strong> Derive key from passphrase using Argon2id. Verify work factor takes &gt;1s on modern hardware. ✓</p>
                <p><strong>Test 2 (No Master Key):</strong> Capture encrypted backup. Demonstrate that even database admin cannot decrypt without passphrase. ✓</p>
                <p><strong>Test 3 (Metadata):</strong> Query server logs. Confirm that timestamps, IP addresses, and sync activity are visible. <span class="fail">✗ Metadata is NOT encrypted.</span></p>
                <p><strong>Test 4 (Deniability):</strong> Attempt to create hidden account with different passphrase. <span class="fail">✗ Feature does not exist.</span></p>
            </div>
        </div>

        <!-- DEGRADED FUNCTIONALITY -->
        <h3>5. Degraded Functionality <span class="level-badge level-2">Level 2</span> <span class="partial">~ PARTIAL</span></h3>

        <div class="box warning">
            <div class="box-title">Compliance Evidence & Gaps</div>
            <h4>What PainTracker Does (Level 2 ✓)</h4>
            <ul>
                <li><strong>Mobile Responsive:</strong> Works on phones, tablets, desktops. Layout adapts to 320px–2560px widths.</li>
                <li><strong>2G Tested:</strong> Core path (load app, view last entry, create new entry) completes in &lt;3s on simulated 2G (100kbps, 100ms latency).</li>
                <li><strong>Low-Memory Tested:</strong> Runs on devices with 512MB RAM; tested on iPhone 6s (1GB RAM).</li>
                <li><strong>No Auto-Media:</strong> Images/attachments are never auto-loaded; users explicitly request view.</li>
            </ul>

            <h4>What PainTracker Does NOT (Gaps)</h4>
            <ul>
                <li><span class="partial">⚠ Progressive Enhancement Partial:</span> App requires JavaScript to function. Plaintext HTML fallback exists but is minimal (login form only). Full journal browsing requires JS.</li>
                <li><span class="partial">⚠ Keyboard Navigation Incomplete:</span> Tab navigation works for core forms. Some UI elements (date picker, chart) require mouse/touch.</li>
                <li><span class="fail">✗ WCAG AA Not Yet Achieved:</span> Color contrast ratios are 4.5:1 on text (meets WCAG), but chart legends fail (3.5:1). Screen reader support is partial (main content okay, interactive elements need work).</li>
            </ul>

            <h4>Specification Requirement</h4>
            <p><strong>Level 3:</strong> Progressive enhancement (HTML baseline works without JS); keyboard-only navigation; WCAG AA compliance.</p>

            <h4>Assessment</h4>
            <p><span class="partial">PARTIAL — Meets Level 2 (mobile responsive, 2G tested, low-memory). Does not meet Level 3 (missing progressive enhancement, incomplete keyboard accessibility, WCAG AA gap).</span></p>

            <p><strong>Honest Assessment:</strong> PainTracker works well on modern smartphones and tablets. It does NOT work for users on extremely slow networks (satellite, 2G) or users without JavaScript support (which is increasingly rare but not zero). It also has accessibility gaps for users relying on screen readers.</p>

            <h4>How to Verify</h4>
            <div class="checkpoint">
                <div class="checkpoint-title">Audit Checkpoint: Degraded Functionality</div>
                <p><strong>Test 1 (2G Performance):</strong> Simulate 2G throttling. Measure load time. &lt;3s for core path. ✓</p>
                <p><strong>Test 2 (Low Memory):</strong> Deploy on iPhone 6s. No out-of-memory crashes. App remains responsive. ✓</p>
                <p><strong>Test 3 (Disable JavaScript):</strong> Browser developer console → disable JS. Welcome page loads. Login form works. Full journal browsing: <span class="fail">✗ Does not work without JS.</span></p>
                <p><strong>Test 4 (Keyboard Navigation):</strong> Tab through form fields. Use only keyboard to create entry. <span class="partial">⚠ Works for text fields; date picker requires mouse.</span></p>
                <p><strong>Test 5 (Screen Reader):</strong> Use NVDA/JAWS on charts and date pickers. <span class="fail">✗ ARIA labels incomplete; users cannot access date picker with screen reader.</span></p>
            </div>
        </div>

        <!-- ESSENTIAL UTILITY -->
        <h3>6. Essential Utility <span class="level-badge level-3">Level 3</span> <span class="pass">✓ MEETS</span></h3>

        <div class="box strength">
            <div class="box-title">Compliance Evidence</div>
            <h4>What PainTracker Does</h4>
            <ul>
                <li><strong>Documented Essential Use Case:</strong> "Chronic pain patients track symptoms, treatments, and triggers offline. System enables pattern identification and medical communication without requiring connectivity or data sharing."</li>
                <li><strong>No Dark Patterns:</strong> No notifications (none sent). No streaks or gamification. Features are straightforward: create entry, view entries, export data.</li>
                <li><strong>Minimal Cognitive Load:</strong> Main screen shows single action: "New Entry." One tap → simple form (date, pain level 1–10, location, treatment, notes). No confusing menus.</li>
                <li><strong>No Addictive Mechanics:</strong> No leaderboards, no achievement badges, no notifications to pull users back. Success metric is user's pain reduction, not app engagement.</li>
                <li><strong>Transparent Funding:</strong> Open-source with grant funding (NIH, foundation). No data harvesting, no premium upsell of core features.</li>
                <li><strong>Success Measured by User Outcome:</strong> Tracked via: user pain reduction, treatment efficacy discovery, doctor-recommended use. NOT by DAU or time-in-app.</li>
            </ul>

            <h4>Specification Requirement</h4>
            <p><strong>Level 3:</strong> Level 2 + independent audit for dark patterns; user satisfaction metrics.</p>

            <h4>Assessment</h4>
            <p><span class="pass">✓ MEETS Level 3</span> — No dark patterns, transparent funding, success measured by user outcome, not engagement.</p>

            <h4>How to Verify</h4>
            <div class="checkpoint">
                <div class="checkpoint-title">Audit Checkpoint: Essential Utility</div>
                <p><strong>Test 1 (Dark Patterns Audit):</strong> Manual inspection of UI/UX. No hidden friction to exit, no manipulative notifications, no surprise paywalls. ✓</p>
                <p><strong>Test 2 (Funding Transparency):</strong> Check website, GitHub, and legal docs. Confirm grant funding; zero data sales. ✓</p>
                <p><strong>Test 3 (User Satisfaction):</strong> Survey users: "Does this app help you track pain?" (target: &gt;80% yes). ✓</p>
            </div>
        </div>

        <!-- THREAT MODEL ALIGNMENT -->
        <h2>Threat Model Alignment</h2>

        <p>Protective Computing specification baseline threat model covers: state surveillance, authoritarian coercion, censorship, device seizure, network tampering.</p>

        <h3>Threats PainTracker Resists</h3>
        <div class="matrix">
            <div class="matrix-item">
                <div class="matrix-title">✓ Passive Data Breach</div>
                <div class="matrix-level">Server compromise: encrypted data is unusable without passphrase</div>
            </div>
            <div class="matrix-item">
                <div class="matrix-title">✓ Network Interception</div>
                <div class="matrix-level">MITM attacks: TLS 1.3 mutual authentication prevents intercept</div>
            </div>
            <div class="matrix-item">
                <div class="matrix-title">✓ Device Theft (Powered Off)</div>
                <div class="matrix-level">Device storage encrypted; even if stolen, data inaccessible without passphrase</div>
            </div>
            <div class="matrix-item">
                <div class="matrix-title">✓ Forced Account Deletion</div>
                <div class="matrix-level">User can delete server account; local data persists</div>
            </div>
        </div>

        <h3>Threats PainTracker Does NOT Resist</h3>
        <div class="matrix">
            <div class="matrix-item">
                <div class="matrix-title">✗ Active Coercion (Torture)</div>
                <div class="matrix-level">No deniability features; if device is unlocked, entries are visible</div>
            </div>
            <div class="matrix-item">
                <div class="matrix-title">✗ Metadata Analysis</div>
                <div class="matrix-level">Server timestamps, sync patterns, IP addresses are not encrypted</div>
            </div>
            <div class="matrix-item">
                <div class="matrix-title">✗ Endpoint Compromise (Malware)</div>
                <div class="matrix-level">If device has keylogger/spyware, all data is visible. Encryption doesn't help if attacker has OS-level access</div>
            </div>
            <div class="matrix-item">
                <div class="matrix-title">✗ Censorship (Server Block)</div>
                <div class="matrix-level">Backup sync requires server access. Can work offline, but cannot backup to cloud if server is censored</div>
            </div>
        </div>

        <!-- DEGRADATION SCENARIOS -->
        <h2>Degradation Scenarios</h2>

        <p>System behavior under resource/threat stress:</p>

        <h3>Scenario 1: Network Outage (1 week)</h3>
        <div class="checkpoint">
            <div class="checkpoint-title">Expected Behavior</div>
            <p><span class="pass">✓ Full Functionality:</span> Users create, edit, delete entries locally. App is 100% functional. Sync queues changes locally. On reconnnection, sync completes.</p>
            <p><strong>Verification:</strong> Manually test offline for 7 days. Confirm entries persist, undo/redo works, no crash.</p>
        </div>

        <h3>Scenario 2: Device Running Out of Storage (500MB remaining)</h3>
        <div class="checkpoint">
            <div class="checkpoint-title">Expected Behavior</div>
            <p><span class="partial">⚠ Degraded:</span> User can still view/edit existing entries. Creating new entries with large attachments may fail. App shows warning "Low storage; consider deleting old entries or uploading to cloud."</p>
            <p><strong>Verification:</strong> Simulate low storage via test environment. Confirm app degrades gracefully without crash.</p>
        </div>

        <h3>Scenario 3: User on 2G Network (100kbps, 500ms latency)</h3>
        <div class="checkpoint">
            <div class="checkpoint-title">Expected Behavior</div>
            <p><span class="pass">✓ Functional:</span> Sync is slow but completes. User creates entries, saves locally, and sync happens in background. No blocking.</p>
            <p><strong>Verification:</strong> Network throttle test. Measure sync time: should be &lt;10s for typical entry even on 2G.</p>
        </div>

        <h3>Scenario 4: User Under State Surveillance (IP logging, account freeze)</h3>
        <div class="checkpoint">
            <div class="checkpoint-title">Expected Behavior</div>
            <p><span class="pass">✓ Encrypted Data:</span> If server is seized, entry plaintext is safe. <span class="partial">⚠ But Metadata Exposed:</span> Timestamps, connection patterns, IP addresses are visible to state actor.</p>
            <p><strong>Risk:</strong> State can determine usage patterns (when did user access app?) but not content of entries.</p>
            <p><strong>Mitigation:</strong> Use VPN / Tor for metadata privacy (outside PainTracker's scope; user responsibility).</p>
        </div>

        <!-- HONEST GAPS -->
        <h2>Honest Gaps & Limitations</h2>

        <div class="box gap">
            <div class="box-title">Known Limitations (Prevents Full Level 3+ Compliance)</div>

            <h3>Gap 1: Coercion Resistance (Missing Deniability)</h3>
            <p><strong>Issue:</strong> No hidden accounts or plausible deniability. Under torture, user cannot deny entries exist if device is unlocked.</p>
            <p><strong>Why It Matters:</strong> Dissident users, abuse survivors in hostile custody situations, and people in high-surveillance authoritarian contexts need this.</p>
            <p><strong>Roadmap:</strong> Level 3 deniability (hidden volumes) planned for v1.2 (Q4 2026). Requires significant UX work and security review.</p>

            <h3>Gap 2: Accessibility (WCAG AA Incomplete)</h3>
            <p><strong>Issue:</strong> Date picker and charts are not keyboard-navigable. Color contrast ratios on charts are 3.5:1 (needs 4.5:1 for WCAG AA).</p>
            <p><strong>Why It Matters:</strong> Users with visual disabilities or motor disabilities (relying on keyboard/switch control) cannot access full functionality.</p>
            <p><strong>Roadmap:</strong> WCAG AA compliance (Degraded Functionality Level 3) planned for v1.1 (Q2 2026).</p>

            <h3>Gap 3: Progressive Enhancement</h3>
            <p><strong>Issue:</strong> Core app requires JavaScript. Plaintext HTML fallback exists but is minimal.</p>
            <p><strong>Why It Matters:</strong> Users in environments where JS is blocked (very restrictive corporate networks, some educational institutions) cannot use web version. Mobile/desktop apps work fine.</p>
            <p><strong>Roadmap:</strong> Progressive enhancement (Degraded Functionality Level 3) is lower priority; mobile/desktop clients provide alternative. Expected v1.2 or v2.0.</p>

            <h3>Gap 4: Metadata Privacy</h3>
            <p><strong>Issue:</strong> Server logs access timestamps, sync activity, IP addresses. These are NOT encrypted and could reveal usage patterns even if entry content is private.</p>
            <p><strong>Why It Matters:</strong> State actors can determine when user is accessing sensitive health information without knowing content. For some users, even "pattern of use" is dangerous.</p>
            <p><strong>Mitigation:</strong> User should employ VPN/Tor for connection-level privacy. PainTracker can encrypt metadata in v1.2 onward.</p>
            <p><strong>Roadmap:</strong> Encrypted metadata (Coercion Resistance improvement) planned for v1.2.</p>

            <h3>Gap 5: No Offline Backup Verification</h3>
            <p><strong>Issue:</strong> Users can export data to CSV, but no built-in way to verify backup integrity (checksums, signed exports).</p>
            <p><strong>Why It Matters:</strong> Users who want to keep offline backups have no way to confirm the backup hasn't been tampered with.</p>
            <p><strong>Roadmap:</strong> Signed exports (Local Authority improvement) planned for v1.1.</p>
        </div>

        <!-- WHO SHOULD USE -->
        <h2>Who Should Use PainTracker</h2>

        <h3>✓ Appropriate For</h3>
        <ul>
            <li>Chronic pain patients in stable democracies with strong privacy law (US, EU, Canada, Australia)</li>
            <li>Patients wanting to avoid medical data mining by insurance companies</li>
            <li>Patients with privacy concerns about cloud health apps</li>
            <li>Users wanting offline-first health journaling</li>
        </ul>

        <h3>⚠ Use With Caution</h3>
        <ul>
            <li>Users in countries with weak privacy law or active surveillance (Russia, China, Iran) — PainTracker provides encryption but lacks deniability features</li>
            <li>Users with accessibility needs (visual/motor disability) — gaps in keyboard navigation and WCAG compliance</li>
            <li>Users with extremely slow connectivity (satellite, 2G only) — tested but not optimized for extreme scarcity</li>
        </ul>

        <h3>✗ Not Appropriate For</h3>
        <ul>
            <li>Users under active state torture/coercion (PainTracker lacks deniability features for this threat)</li>
            <li>Users needing complete anonymity (metadata is not encrypted)</li>
            <li>Users in environments where JavaScript is completely blocked</li>
        </ul>

        <!-- AUDIT TRAIL -->
        <h2>How This Compliance Mapping Was Verified</h2>

        <p>This document is not self-certification. It is an honest assessment designed to be independently verifiable.</p>

        <h3>Verification Methodology</h3>
        <ol>
            <li><strong>Specification Review:</strong> Each claim is mapped to specific RFC 2119 language in Protective Computing Specification v1.0</li>
            <li><strong>Code Inspection:</strong> Cryptography implementation reviewed against NIST recommendations; key derivation verified against OWASP guidelines</li>
            <li><strong>Functional Testing:</strong> Each checkpoint is reproducible; tests can be run by independent auditors</li>
            <li><strong>Network Analysis:</strong> TLS configuration verified via <code>testssl.sh</code>; no weak ciphersuites</li>
            <li><strong>Accessibility Audit:</strong> WCAG 2.1 compliance checked via Axe DevTools; gaps documented</li>
            <li><strong>Threat Modeling:</strong> Alignment with baseline threat model explicitly assessed; out-of-scope threats identified</li>
        </ol>

        <h3>Audit Artifacts</h3>
        <ul>
            <li><strong>Code repository:</strong> <a href="https://github.com/paintracker/paintracker" target="_blank">github.com/paintracker/paintracker</a> (open-source for transparency)</li>
            <li><strong>Cryptography audit report:</strong> [Link to third-party security review, if available]</li>
            <li><strong>WCAG audit checklist:</strong> [Detailed checklist available on request]</li>
            <li><strong>Test execution logs:</strong> Available in `/test/audit-logs/` directory of repository</li>
        </ul>

        <!-- NEXT STEPS -->
        <h2>Next Steps</h2>

        <h3>For PainTracker Team</h3>
        <ol>
            <li>Address Gap 1 (Coercion Resistance deniability) for Level 3 compliance → v1.2 (Q4 2026)</li>
            <li>Address Gap 2 (WCAG AA accessibility) for Degraded Functionality Level 3 → v1.1 (Q2 2026)</li>
            <li>Encrypt server metadata (access logs, timestamps) → v1.2</li>
            <li>Pursue independent security audit for Level 3 certification</li>
        </ol>

        <h3>For Independent Auditors</h3>
        <ol>
            <li>Review this compliance mapping</li>
            <li>Run verification tests from checkpoints above</li>
            <li>Develop additional test cases (fuzzing, adversarial input)</li>
            <li>Issue audit report: confirm, refute, or refine claims</li>
        </ol>

        <h3>For Other Implementations</h3>
        <p>Use this template to document your own system's Protective Computing compliance. Be honest about gaps. Transparency builds credibility more than perfection claims do.</p>

    </main>

    <footer>
        <p><strong>PainTracker — Protective Computing Compliance Mapping</strong></p>
        <p>Reference Implementation Based on Specification v1.0</p>
        <p style="margin-top: 1rem; font-size: 12px;">This document demonstrates honest assessment methodology. It is a template for other implementations.</p>
        <p style="margin-top: 1rem; font-size: 12px;"><a href="/docs/spec/v1.0.html">← Back to Specification v1.0</a></p>
    </footer>
</body>
</html>